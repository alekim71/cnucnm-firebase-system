# 7. CNUCNM ê³„ì‚°ì‹ ì •ë¦¬ ë° ìˆ˜ì‹ ëª¨ìŒ

## ğŸ“Š ê°œìš”

ì´ ë¬¸ì„œëŠ” CNUCNM ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ê³„ì‚°ì‹ê³¼ ìˆ˜ì‹ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤. NASEM(2024) ê¸°ì¤€ì— ë”°ë¥¸ ì†Œì˜ ì˜ì–‘ ìš”êµ¬ëŸ‰ ê³„ì‚°ê³¼ ì‚¬ë£Œ ë°°í•© ìµœì í™”ì— í•„ìš”í•œ í•µì‹¬ ìˆ˜ì‹ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.

## ğŸ”¢ ê¸°ë³¸ ìƒìˆ˜ ë° ë³€í™˜ ê³„ìˆ˜

### ì²´ì¤‘ ë³€í™˜ ê³„ìˆ˜
```python
# ê¸°ë³¸ ë³€í™˜ ê³„ìˆ˜
q_FBW_SBW = 0.96      # FBW(Final Body Weight) â†’ SBW(Shrunk Body Weight)
q_SBW_EBW = 0.891     # SBW â†’ EBW(Empty Body Weight)
q_ADG_SWG = 1.0       # ADG(Average Daily Gain) â†’ SWG(Shrunk Weight Gain)
q_SWG_EWG = 0.956     # SWG â†’ EWG(Empty Weight Gain)

# ë‹¨ë°±ì§ˆ ë³€í™˜ ê³„ìˆ˜
q_MCP_MP = 0.64       # MCP(Microbial Crude Protein) â†’ MP(Metabolizable Protein)
q_RUP_MP = 0.80       # RUP(Rumen Undegradable Protein) â†’ MP

# ê¸°íƒ€ ìƒìˆ˜
month_day = 30.4      # ì›”ë³„ ì¼ìˆ˜
pregnancy_day = 283   # ì„ì‹  ê¸°ê°„ (ì¼)
milk_cp_tp = 0.951    # ìš°ìœ  CP â†’ TP(True Protein) ë³€í™˜ ê³„ìˆ˜
```

### ì°¸ì¡°ê°’ (2024ë…„ ê²€ì •ìš° í‰ê· )
```python
# ìƒì‚°ì„± ê¸°ì¤€ê°’
rha_KDIA = 10159      # 305ì¼ ìœ ëŸ‰ (kg)
ref_milk_yield_kg = rha_KDIA / 305  # í‰ê·  ì¼ì¼ ìœ ëŸ‰ (kg)
ref_milk_fat_p = 4.02 # ìœ ì§€ë°© (%)
ref_milk_cp_p = 3.22  # ìœ ë‹¨ë°± (%)
ref_milk_tp_p = ref_milk_cp_p * milk_cp_tp  # ìœ ì§„ë‹¨ë°± (%)

# ë²ˆì‹ ê´€ë ¨
age_at_first_calving = 26.8  # ì²« ë¶„ë§Œ ì—°ë ¹ (ê°œì›”)
ci_month = 447.7 / 30.4      # ë¶„ë§Œ ê°„ê²© (ê°œì›”)
```

## ğŸ„ ì²´ì¤‘ ë° ì²´í˜• ê´€ë ¨ ê³„ì‚°

### ì²´ì¤‘ ë³€í™˜ ê³µì‹
```python
def convert_body_weight(fbw, conversion_type):
    """
    ì²´ì¤‘ ë³€í™˜ í•¨ìˆ˜
    
    Args:
        fbw: Final Body Weight (kg)
        conversion_type: ë³€í™˜ ìœ í˜• ('SBW', 'EBW')
    
    Returns:
        ë³€í™˜ëœ ì²´ì¤‘ (kg)
    """
    if conversion_type == 'SBW':
        return fbw * q_FBW_SBW
    elif conversion_type == 'EBW':
        sbw = fbw * q_FBW_SBW
        return sbw * q_SBW_EBW
    else:
        raise ValueError("Invalid conversion type")

# ì‚¬ìš© ì˜ˆì‹œ
sbw = convert_body_weight(fbw=600, conversion_type='SBW')  # 576 kg
ebw = convert_body_weight(fbw=600, conversion_type='EBW')  # 513 kg
```

### ì„±ì¥ ê´€ë ¨ ê³„ì‚°
```python
def calculate_weight_gain(adg, gain_type):
    """
    ì¦ì²´ëŸ‰ ë³€í™˜ í•¨ìˆ˜
    
    Args:
        adg: Average Daily Gain (kg/day)
        gain_type: ì¦ì²´ ìœ í˜• ('SWG', 'EWG')
    
    Returns:
        ë³€í™˜ëœ ì¦ì²´ëŸ‰ (kg/day)
    """
    if gain_type == 'SWG':
        return adg * q_ADG_SWG
    elif gain_type == 'EWG':
        swg = adg * q_ADG_SWG
        return swg * q_SWG_EWG
    else:
        raise ValueError("Invalid gain type")

# ì‚¬ìš© ì˜ˆì‹œ
swg = calculate_weight_gain(adg=1.2, gain_type='SWG')  # 1.2 kg/day
ewg = calculate_weight_gain(adg=1.2, gain_type='EWG')  # 1.15 kg/day
```

## ğŸ”‹ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ ê³„ì‚°

### ìœ ì§€ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Maintenance Energy)

#### ê¸°ë³¸ ìœ ì§€ ì—ë„ˆì§€ (Fasting Heat Production, FHP)
```python
def calculate_fhp(ebw, breed, stage):
    """
    Fasting Heat Production ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
        breed: í’ˆì¢… ('hanwoo', 'holstein')
        stage: ìƒë¦¬ì  ë‹¨ê³„ ('calf', 'growing', 'lactating', 'drying')
    
    Returns:
        FHP (Mcal/day)
    """
    # í’ˆì¢…ë³„ FHP ê³„ìˆ˜
    fhp_coefficients = {
        'hanwoo': {
            'calf': 0.07,
            'growing': 0.07,
            'fattening': 0.07,
            'lactating': 0.084,
            'drying': 0.07
        },
        'holstein': {
            'calf': 0.07,
            'growing': 0.07,
            'fattening': 0.07,
            'lactating': 0.084,
            'drying': 0.07
        }
    }
    
    coefficient = fhp_coefficients[breed][stage]
    fhp = coefficient * (ebw ** 0.75)
    
    return fhp

# ì‚¬ìš© ì˜ˆì‹œ
fhp = calculate_fhp(ebw=513, breed='hanwoo', stage='lactating')  # 36.9 Mcal/day
```

#### í™œë™ ì—ë„ˆì§€ (Activity Energy)
```python
def calculate_activity_energy(ebw, activity_level='normal'):
    """
    í™œë™ ì—ë„ˆì§€ ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
        activity_level: í™œë™ ìˆ˜ì¤€ ('low', 'normal', 'high')
    
    Returns:
        í™œë™ ì—ë„ˆì§€ (Mcal/day)
    """
    activity_coefficients = {
        'low': 0.005,
        'normal': 0.010,
        'high': 0.015
    }
    
    coefficient = activity_coefficients[activity_level]
    activity_energy = coefficient * (ebw ** 0.75)
    
    return activity_energy

# ì‚¬ìš© ì˜ˆì‹œ
activity_energy = calculate_activity_energy(ebw=513, activity_level='normal')  # 5.3 Mcal/day
```

#### ì´ ìœ ì§€ ì—ë„ˆì§€ (Total Maintenance Energy)
```python
def calculate_maintenance_energy(ebw, breed, stage, activity_level='normal'):
    """
    ì´ ìœ ì§€ ì—ë„ˆì§€ ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
        breed: í’ˆì¢…
        stage: ìƒë¦¬ì  ë‹¨ê³„
        activity_level: í™œë™ ìˆ˜ì¤€
    
    Returns:
        ì´ ìœ ì§€ ì—ë„ˆì§€ (Mcal/day)
    """
    fhp = calculate_fhp(ebw, breed, stage)
    activity = calculate_activity_energy(ebw, activity_level)
    
    total_maintenance = fhp + activity
    return total_maintenance

# ì‚¬ìš© ì˜ˆì‹œ
maintenance_energy = calculate_maintenance_energy(
    ebw=513, breed='hanwoo', stage='lactating'
)  # 42.2 Mcal/day
```

### ì„±ì¥ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Growth Energy)

#### ì„±ì¥ ì—ë„ˆì§€ ê³„ì‚°
```python
def calculate_growth_energy(ewg, ebw, breed):
    """
    ì„±ì¥ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        ewg: Empty Weight Gain (kg/day)
        ebw: Empty Body Weight (kg)
        breed: í’ˆì¢…
    
    Returns:
        ì„±ì¥ ì—ë„ˆì§€ (Mcal/day)
    """
    # ì„±ì¥ ì—ë„ˆì§€ ê³„ìˆ˜ (Mcal/kg gain)
    growth_coefficients = {
        'hanwoo': 4.5,
        'holstein': 4.8
    }
    
    coefficient = growth_coefficients[breed]
    growth_energy = coefficient * ewg
    
    return growth_energy

# ì‚¬ìš© ì˜ˆì‹œ
growth_energy = calculate_growth_energy(
    ewg=1.15, ebw=513, breed='hanwoo'
)  # 5.2 Mcal/day
```

### ë²ˆì‹ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Pregnancy Energy)

#### ì„ì‹  ì—ë„ˆì§€ ê³„ì‚°
```python
def calculate_pregnancy_energy(gestation_day, breed):
    """
    ì„ì‹  ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        gestation_day: ì„ì‹ ì¼ìˆ˜
        breed: í’ˆì¢…
    
    Returns:
        ì„ì‹  ì—ë„ˆì§€ (Mcal/day)
    """
    if gestation_day <= 0 or gestation_day > 283:
        return 0
    
    # ì„ì‹  ì—ë„ˆì§€ ê³„ìˆ˜
    pregnancy_coefficients = {
        'hanwoo': 0.0008,
        'holstein': 0.0009
    }
    
    coefficient = pregnancy_coefficients[breed]
    pregnancy_energy = coefficient * (gestation_day ** 2)
    
    return pregnancy_energy

# ì‚¬ìš© ì˜ˆì‹œ
pregnancy_energy = calculate_pregnancy_energy(
    gestation_day=200, breed='hanwoo'
)  # 32.0 Mcal/day
```

### ìœ ì‚° ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Lactation Energy)

#### ìœ ì‚° ì—ë„ˆì§€ ê³„ì‚°
```python
def calculate_lactation_energy(milk_yield, milk_fat, milk_protein):
    """
    ìœ ì‚° ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        milk_yield: ì¼ì¼ ìœ ëŸ‰ (kg/day)
        milk_fat: ìœ ì§€ë°© (%)
        milk_protein: ìœ ë‹¨ë°± (%)
    
    Returns:
        ìœ ì‚° ì—ë„ˆì§€ (Mcal/day)
    """
    # ìš°ìœ  ì—ë„ˆì§€ í•¨ëŸ‰ ê³„ì‚° (Mcal/kg)
    milk_energy = 0.0929 * milk_fat + 0.0563 * milk_protein + 0.192
    
    # ì´ ìœ ì‚° ì—ë„ˆì§€
    lactation_energy = milk_yield * milk_energy
    
    return lactation_energy

# ì‚¬ìš© ì˜ˆì‹œ
lactation_energy = calculate_lactation_energy(
    milk_yield=25.0, milk_fat=4.02, milk_protein=3.22
)  # 18.5 Mcal/day
```

### ì´ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Total Energy Requirements)
```python
def calculate_total_energy_requirements(
    ebw, breed, stage, ewg=0, gestation_day=0, 
    milk_yield=0, milk_fat=4.02, milk_protein=3.22,
    activity_level='normal'
):
    """
    ì´ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
        breed: í’ˆì¢…
        stage: ìƒë¦¬ì  ë‹¨ê³„
        ewg: Empty Weight Gain (kg/day)
        gestation_day: ì„ì‹ ì¼ìˆ˜
        milk_yield: ì¼ì¼ ìœ ëŸ‰ (kg/day)
        milk_fat: ìœ ì§€ë°© (%)
        milk_protein: ìœ ë‹¨ë°± (%)
        activity_level: í™œë™ ìˆ˜ì¤€
    
    Returns:
        ì´ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Mcal/day)
    """
    # ê° êµ¬ì„± ìš”ì†Œ ê³„ì‚°
    maintenance = calculate_maintenance_energy(ebw, breed, stage, activity_level)
    growth = calculate_growth_energy(ewg, ebw, breed) if ewg > 0 else 0
    pregnancy = calculate_pregnancy_energy(gestation_day, breed)
    lactation = calculate_lactation_energy(milk_yield, milk_fat, milk_protein)
    
    # ì´ ì—ë„ˆì§€ ìš”êµ¬ëŸ‰
    total_energy = maintenance + growth + pregnancy + lactation
    
    return {
        'maintenance': maintenance,
        'growth': growth,
        'pregnancy': pregnancy,
        'lactation': lactation,
        'total': total_energy
    }

# ì‚¬ìš© ì˜ˆì‹œ
energy_requirements = calculate_total_energy_requirements(
    ebw=513, breed='hanwoo', stage='lactating',
    ewg=0, gestation_day=0, milk_yield=25.0
)
# ê²°ê³¼: {'maintenance': 42.2, 'growth': 0, 'pregnancy': 0, 'lactation': 18.5, 'total': 60.7}
```

## ğŸ¥© ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ ê³„ì‚°

### ìœ ì§€ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (Maintenance Protein)

#### ë‚´ì¸ì„± ìš”ì‹¤ (Endogenous Urinary Loss)
```python
def calculate_endogenous_loss(ebw):
    """
    ë‚´ì¸ì„± ìš”ì‹¤ ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
    
    Returns:
        ë‚´ì¸ì„± ìš”ì‹¤ (g/day)
    """
    endogenous_loss = 0.2 * (ebw ** 0.75)
    return endogenous_loss

# ì‚¬ìš© ì˜ˆì‹œ
endogenous_loss = calculate_endogenous_loss(ebw=513)  # 8.2 g/day
```

#### ëŒ€ì‚¬ì„± ìš”ì‹¤ (Metabolic Fecal Loss)
```python
def calculate_metabolic_loss(dmi):
    """
    ëŒ€ì‚¬ì„± ìš”ì‹¤ ê³„ì‚°
    
    Args:
        dmi: Dry Matter Intake (kg/day)
    
    Returns:
        ëŒ€ì‚¬ì„± ìš”ì‹¤ (g/day)
    """
    metabolic_loss = 30 * dmi
    return metabolic_loss

# ì‚¬ìš© ì˜ˆì‹œ
metabolic_loss = calculate_metabolic_loss(dmi=20.0)  # 600 g/day
```

#### ì´ ìœ ì§€ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰
```python
def calculate_maintenance_protein(ebw, dmi):
    """
    ì´ ìœ ì§€ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
        dmi: Dry Matter Intake (kg/day)
    
    Returns:
        ìœ ì§€ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (g/day)
    """
    endogenous = calculate_endogenous_loss(ebw)
    metabolic = calculate_metabolic_loss(dmi)
    
    total_maintenance = endogenous + metabolic
    return total_maintenance

# ì‚¬ìš© ì˜ˆì‹œ
maintenance_protein = calculate_maintenance_protein(ebw=513, dmi=20.0)  # 608.2 g/day
```

### ì„±ì¥ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (Growth Protein)

#### ì„±ì¥ ë‹¨ë°±ì§ˆ ê³„ì‚°
```python
def calculate_growth_protein(ewg, ebw, breed):
    """
    ì„±ì¥ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        ewg: Empty Weight Gain (kg/day)
        ebw: Empty Body Weight (kg)
        breed: í’ˆì¢…
    
    Returns:
        ì„±ì¥ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (g/day)
    """
    # ì„±ì¥ ë‹¨ë°±ì§ˆ ê³„ìˆ˜ (g/kg gain)
    growth_protein_coefficients = {
        'hanwoo': 180,
        'holstein': 190
    }
    
    coefficient = growth_protein_coefficients[breed]
    growth_protein = coefficient * ewg
    
    return growth_protein

# ì‚¬ìš© ì˜ˆì‹œ
growth_protein = calculate_growth_protein(
    ewg=1.15, ebw=513, breed='hanwoo'
)  # 207 g/day
```

### ë²ˆì‹ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (Pregnancy Protein)

#### ì„ì‹  ë‹¨ë°±ì§ˆ ê³„ì‚°
```python
def calculate_pregnancy_protein(gestation_day, breed):
    """
    ì„ì‹  ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        gestation_day: ì„ì‹ ì¼ìˆ˜
        breed: í’ˆì¢…
    
    Returns:
        ì„ì‹  ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (g/day)
    """
    if gestation_day <= 0 or gestation_day > 283:
        return 0
    
    # ì„ì‹  ë‹¨ë°±ì§ˆ ê³„ìˆ˜
    pregnancy_protein_coefficients = {
        'hanwoo': 0.003,
        'holstein': 0.0035
    }
    
    coefficient = pregnancy_protein_coefficients[breed]
    pregnancy_protein = coefficient * (gestation_day ** 2)
    
    return pregnancy_protein

# ì‚¬ìš© ì˜ˆì‹œ
pregnancy_protein = calculate_pregnancy_protein(
    gestation_day=200, breed='hanwoo'
)  # 120 g/day
```

### ìœ ì‚° ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (Lactation Protein)

#### ìœ ì‚° ë‹¨ë°±ì§ˆ ê³„ì‚°
```python
def calculate_lactation_protein(milk_yield, milk_protein):
    """
    ìœ ì‚° ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        milk_yield: ì¼ì¼ ìœ ëŸ‰ (kg/day)
        milk_protein: ìœ ë‹¨ë°± (%)
    
    Returns:
        ìœ ì‚° ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (g/day)
    """
    # ìš°ìœ  ë‹¨ë°±ì§ˆ í•¨ëŸ‰ (g/kg)
    milk_protein_content = milk_protein * 10
    
    # ì´ ìœ ì‚° ë‹¨ë°±ì§ˆ
    lactation_protein = milk_yield * milk_protein_content
    
    return lactation_protein

# ì‚¬ìš© ì˜ˆì‹œ
lactation_protein = calculate_lactation_protein(
    milk_yield=25.0, milk_protein=3.22
)  # 805 g/day
```

### ì´ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (Total Protein Requirements)
```python
def calculate_total_protein_requirements(
    ebw, breed, dmi, ewg=0, gestation_day=0, 
    milk_yield=0, milk_protein=3.22
):
    """
    ì´ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ ê³„ì‚°
    
    Args:
        ebw: Empty Body Weight (kg)
        breed: í’ˆì¢…
        dmi: Dry Matter Intake (kg/day)
        ewg: Empty Weight Gain (kg/day)
        gestation_day: ì„ì‹ ì¼ìˆ˜
        milk_yield: ì¼ì¼ ìœ ëŸ‰ (kg/day)
        milk_protein: ìœ ë‹¨ë°± (%)
    
    Returns:
        ì´ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (g/day)
    """
    # ê° êµ¬ì„± ìš”ì†Œ ê³„ì‚°
    maintenance = calculate_maintenance_protein(ebw, dmi)
    growth = calculate_growth_protein(ewg, ebw, breed) if ewg > 0 else 0
    pregnancy = calculate_pregnancy_protein(gestation_day, breed)
    lactation = calculate_lactation_protein(milk_yield, milk_protein)
    
    # ì´ ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰
    total_protein = maintenance + growth + pregnancy + lactation
    
    return {
        'maintenance': maintenance,
        'growth': growth,
        'pregnancy': pregnancy,
        'lactation': lactation,
        'total': total_protein
    }

# ì‚¬ìš© ì˜ˆì‹œ
protein_requirements = calculate_total_protein_requirements(
    ebw=513, breed='hanwoo', dmi=20.0,
    ewg=0, gestation_day=0, milk_yield=25.0
)
# ê²°ê³¼: {'maintenance': 608.2, 'growth': 0, 'pregnancy': 0, 'lactation': 805, 'total': 1413.2}
```

## ğŸ¥— ì‚¬ë£Œ ë°°í•© ìµœì í™” (Linear Programming)

### ëª©ì  í•¨ìˆ˜ (Objective Function)
```python
def objective_function(feed_variables, feed_prices):
    """
    ë¹„ìš© ìµœì†Œí™” ëª©ì  í•¨ìˆ˜
    
    Args:
        feed_variables: ì‚¬ë£Œ ë³€ìˆ˜ (kg)
        feed_prices: ì‚¬ë£Œ ê°€ê²© (ì›/kg)
    
    Returns:
        ì´ ë¹„ìš© (ì›)
    """
    total_cost = sum(feed_variables[i] * feed_prices[i] for i in range(len(feed_variables)))
    return total_cost
```

### ì œì•½ ì¡°ê±´ (Constraints)

#### ì˜ì–‘ì†Œ ì œì•½ ì¡°ê±´
```python
def nutrient_constraints(feed_variables, feed_nutrients, requirements):
    """
    ì˜ì–‘ì†Œ ì œì•½ ì¡°ê±´
    
    Args:
        feed_variables: ì‚¬ë£Œ ë³€ìˆ˜ (kg)
        feed_nutrients: ì‚¬ë£Œë³„ ì˜ì–‘ì†Œ í•¨ëŸ‰
        requirements: ì˜ì–‘ì†Œ ìš”êµ¬ëŸ‰
    
    Returns:
        ì œì•½ ì¡°ê±´ ë¦¬ìŠ¤íŠ¸
    """
    constraints = []
    
    for nutrient in requirements:
        min_value = requirements[nutrient]['min']
        max_value = requirements[nutrient]['max']
        
        # ìµœì†Œ ì œì•½ ì¡°ê±´
        min_constraint = sum(
            feed_variables[i] * feed_nutrients[i][nutrient] 
            for i in range(len(feed_variables))
        ) >= min_value
        
        # ìµœëŒ€ ì œì•½ ì¡°ê±´
        max_constraint = sum(
            feed_variables[i] * feed_nutrients[i][nutrient] 
            for i in range(len(feed_variables))
        ) <= max_value
        
        constraints.extend([min_constraint, max_constraint])
    
    return constraints
```

#### ì‚¬ë£Œ ë¹„ìœ¨ ì œì•½ ì¡°ê±´
```python
def feed_ratio_constraints(feed_variables, min_ratios, max_ratios, total_dmi):
    """
    ì‚¬ë£Œ ë¹„ìœ¨ ì œì•½ ì¡°ê±´
    
    Args:
        feed_variables: ì‚¬ë£Œ ë³€ìˆ˜ (kg)
        min_ratios: ìµœì†Œ ë¹„ìœ¨ (%)
        max_ratios: ìµœëŒ€ ë¹„ìœ¨ (%)
        total_dmi: ì´ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg)
    
    Returns:
        ì œì•½ ì¡°ê±´ ë¦¬ìŠ¤íŠ¸
    """
    constraints = []
    
    for i in range(len(feed_variables)):
        # ìµœì†Œ ë¹„ìœ¨ ì œì•½
        min_constraint = feed_variables[i] >= (min_ratios[i] / 100) * total_dmi
        
        # ìµœëŒ€ ë¹„ìœ¨ ì œì•½
        max_constraint = feed_variables[i] <= (max_ratios[i] / 100) * total_dmi
        
        constraints.extend([min_constraint, max_constraint])
    
    return constraints
```

#### ì´ëŸ‰ ì œì•½ ì¡°ê±´
```python
def total_amount_constraint(feed_variables, total_dmi):
    """
    ì´ëŸ‰ ì œì•½ ì¡°ê±´
    
    Args:
        feed_variables: ì‚¬ë£Œ ë³€ìˆ˜ (kg)
        total_dmi: ì´ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg)
    
    Returns:
        ì œì•½ ì¡°ê±´
    """
    return sum(feed_variables) == total_dmi
```

### ìµœì í™” ë¬¸ì œ í’€ì´
```python
from pulp import *

def solve_feed_formulation(feed_data, requirements, total_dmi):
    """
    ì‚¬ë£Œ ë°°í•© ìµœì í™” ë¬¸ì œ í’€ì´
    
    Args:
        feed_data: ì‚¬ë£Œ ë°ì´í„° (ê°€ê²©, ì˜ì–‘ì†Œ í•¨ëŸ‰)
        requirements: ì˜ì–‘ì†Œ ìš”êµ¬ëŸ‰
        total_dmi: ì´ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg)
    
    Returns:
        ìµœì  ë°°í•© ê²°ê³¼
    """
    # ë¬¸ì œ ì •ì˜
    prob = LpProblem("Feed_Formulation", LpMinimize)
    
    # ë³€ìˆ˜ ì •ì˜
    feed_vars = []
    for i in range(len(feed_data)):
        var = LpVariable(f"feed_{i}", 0, None)
        feed_vars.append(var)
    
    # ëª©ì  í•¨ìˆ˜ (ë¹„ìš© ìµœì†Œí™”)
    prob += lpSum([feed_vars[i] * feed_data[i]['price'] for i in range(len(feed_data))])
    
    # ì œì•½ ì¡°ê±´ ì¶”ê°€
    # 1. ì˜ì–‘ì†Œ ì œì•½ ì¡°ê±´
    for nutrient in requirements:
        min_val = requirements[nutrient]['min']
        max_val = requirements[nutrient]['max']
        
        prob += lpSum([feed_vars[i] * feed_data[i][nutrient] for i in range(len(feed_data))]) >= min_val
        prob += lpSum([feed_vars[i] * feed_data[i][nutrient] for i in range(len(feed_data))]) <= max_val
    
    # 2. ì´ëŸ‰ ì œì•½ ì¡°ê±´
    prob += lpSum(feed_vars) == total_dmi
    
    # ë¬¸ì œ í’€ì´
    prob.solve()
    
    # ê²°ê³¼ ë°˜í™˜
    if LpStatus[prob.status] == 'Optimal':
        result = {
            'status': 'optimal',
            'total_cost': value(prob.objective),
            'feed_mixture': [value(var) for var in feed_vars],
            'nutrient_composition': {}
        }
        
        # ì˜ì–‘ì†Œ ì¡°ì„± ê³„ì‚°
        for nutrient in requirements:
            result['nutrient_composition'][nutrient] = sum(
                value(feed_vars[i]) * feed_data[i][nutrient] 
                for i in range(len(feed_data))
            )
        
        return result
    else:
        return {'status': 'infeasible', 'message': 'No feasible solution found'}

# ì‚¬ìš© ì˜ˆì‹œ
feed_data = [
    {'name': 'Corn', 'price': 300, 'cp': 8.5, 'energy': 3.2, 'ndf': 9.0},
    {'name': 'Soybean', 'price': 800, 'cp': 44.0, 'energy': 3.8, 'ndf': 7.0},
    {'name': 'Alfalfa', 'price': 500, 'cp': 18.0, 'energy': 2.1, 'ndf': 45.0}
]

requirements = {
    'cp': {'min': 16.0, 'max': 18.0},
    'energy': {'min': 2.8, 'max': 3.2},
    'ndf': {'min': 25.0, 'max': 35.0}
}

result = solve_feed_formulation(feed_data, requirements, total_dmi=20.0)
```

## ğŸ” ì„­ì·¨ëŸ‰ ì˜ˆì¸¡

### ì²´ì¤‘ ê¸°ë°˜ ì„­ì·¨ëŸ‰ ì˜ˆì¸¡
```python
def predict_dmi_by_weight(bw, stage, breed):
    """
    ì²´ì¤‘ ê¸°ë°˜ ê±´ë¬¼ ì„­ì·¨ëŸ‰ ì˜ˆì¸¡
    
    Args:
        bw: Body Weight (kg)
        stage: ìƒë¦¬ì  ë‹¨ê³„
        breed: í’ˆì¢…
    
    Returns:
        ì˜ˆìƒ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg/day)
    """
    # ì²´ì¤‘ ê¸°ë°˜ ê³„ìˆ˜
    weight_coefficients = {
        'hanwoo': {
            'calf': 0.025,
            'growing': 0.022,
            'lactating': 0.030,
            'drying': 0.018
        },
        'holstein': {
            'calf': 0.025,
            'growing': 0.022,
            'lactating': 0.032,
            'drying': 0.018
        }
    }
    
    coefficient = weight_coefficients[breed][stage]
    dmi = coefficient * bw
    
    return dmi

# ì‚¬ìš© ì˜ˆì‹œ
dmi = predict_dmi_by_weight(bw=600, stage='lactating', breed='hanwoo')  # 18.0 kg/day
```

### ìƒì‚°ì„± ê¸°ë°˜ ì„­ì·¨ëŸ‰ ì¡°ì •
```python
def adjust_dmi_by_production(base_dmi, milk_yield, milk_fat):
    """
    ìƒì‚°ì„± ê¸°ë°˜ ì„­ì·¨ëŸ‰ ì¡°ì •
    
    Args:
        base_dmi: ê¸°ë³¸ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg/day)
        milk_yield: ì¼ì¼ ìœ ëŸ‰ (kg/day)
        milk_fat: ìœ ì§€ë°© (%)
    
    Returns:
        ì¡°ì •ëœ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg/day)
    """
    # ìœ ëŸ‰ì— ë”°ë¥¸ ì¡°ì • ê³„ìˆ˜
    milk_adjustment = 0.2 * milk_yield
    
    # ìœ ì§€ë°©ì— ë”°ë¥¸ ì¡°ì • ê³„ìˆ˜
    fat_adjustment = 0.1 * milk_fat
    
    adjusted_dmi = base_dmi + milk_adjustment + fat_adjustment
    
    return adjusted_dmi

# ì‚¬ìš© ì˜ˆì‹œ
adjusted_dmi = adjust_dmi_by_production(
    base_dmi=18.0, milk_yield=25.0, milk_fat=4.02
)  # 23.4 kg/day
```

## ğŸŒ¡ï¸ í™˜ê²½ ë³´ì •

### ì˜¨ë„ ë³´ì •
```python
def temperature_adjustment(base_requirement, temperature, breed):
    """
    ì˜¨ë„ì— ë”°ë¥¸ ìš”êµ¬ëŸ‰ ë³´ì •
    
    Args:
        base_requirement: ê¸°ë³¸ ìš”êµ¬ëŸ‰
        temperature: í™˜ê²½ ì˜¨ë„ (Â°C)
        breed: í’ˆì¢…
    
    Returns:
        ë³´ì •ëœ ìš”êµ¬ëŸ‰
    """
    # ì˜¨ë„ ë³´ì • ê³„ìˆ˜
    temp_coefficients = {
        'hanwoo': 0.02,  # í•œìš°ëŠ” ì¶”ìœ„ì— ê°•í•¨
        'holstein': 0.025  # í™€ìŠ¤íƒ€ì¸ì€ ì¶”ìœ„ì— ë¯¼ê°
    }
    
    coefficient = temp_coefficients[breed]
    
    if temperature < 5:
        # ì €ì˜¨ ë³´ì •
        adjustment = coefficient * (5 - temperature)
        adjusted_requirement = base_requirement * (1 + adjustment)
    elif temperature > 25:
        # ê³ ì˜¨ ë³´ì •
        adjustment = coefficient * (temperature - 25)
        adjusted_requirement = base_requirement * (1 + adjustment)
    else:
        adjusted_requirement = base_requirement
    
    return adjusted_requirement

# ì‚¬ìš© ì˜ˆì‹œ
adjusted_energy = temperature_adjustment(
    base_requirement=60.7, temperature=30, breed='hanwoo'
)  # 62.4 Mcal/day
```

## ğŸ“Š ì˜ì–‘ì†Œ ê· í˜• ë¶„ì„

### ì˜ì–‘ì†Œ ë¹„ìœ¨ ê³„ì‚°
```python
def calculate_nutrient_ratios(nutrient_composition):
    """
    ì˜ì–‘ì†Œ ë¹„ìœ¨ ê³„ì‚°
    
    Args:
        nutrient_composition: ì˜ì–‘ì†Œ ì¡°ì„± (g/kg DM)
    
    Returns:
        ì˜ì–‘ì†Œ ë¹„ìœ¨
    """
    ratios = {}
    
    # CP:NDF ë¹„ìœ¨
    if nutrient_composition['ndf'] > 0:
        ratios['cp_ndf'] = nutrient_composition['cp'] / nutrient_composition['ndf']
    
    # NFC:NDF ë¹„ìœ¨
    if nutrient_composition['ndf'] > 0:
        ratios['nfc_ndf'] = nutrient_composition['nfc'] / nutrient_composition['ndf']
    
    # Ca:P ë¹„ìœ¨
    if nutrient_composition['p'] > 0:
        ratios['ca_p'] = nutrient_composition['ca'] / nutrient_composition['p']
    
    return ratios

# ì‚¬ìš© ì˜ˆì‹œ
nutrient_composition = {
    'cp': 16.5, 'ndf': 30.0, 'nfc': 45.0, 'ca': 0.8, 'p': 0.4
}
ratios = calculate_nutrient_ratios(nutrient_composition)
# ê²°ê³¼: {'cp_ndf': 0.55, 'nfc_ndf': 1.5, 'ca_p': 2.0}
```

### ê· í˜• ì ìˆ˜ ê³„ì‚°
```python
def calculate_balance_score(nutrient_composition, requirements):
    """
    ì˜ì–‘ì†Œ ê· í˜• ì ìˆ˜ ê³„ì‚°
    
    Args:
        nutrient_composition: ì˜ì–‘ì†Œ ì¡°ì„±
        requirements: ì˜ì–‘ì†Œ ìš”êµ¬ëŸ‰
    
    Returns:
        ê· í˜• ì ìˆ˜ (0-100)
    """
    score = 100
    penalties = 0
    
    for nutrient in requirements:
        actual = nutrient_composition.get(nutrient, 0)
        min_req = requirements[nutrient]['min']
        max_req = requirements[nutrient]['max']
        
        if actual < min_req:
            # ë¶€ì¡± í˜ë„í‹°
            deficiency = (min_req - actual) / min_req
            penalties += deficiency * 20
        elif actual > max_req:
            # ê³¼ì‰ í˜ë„í‹°
            excess = (actual - max_req) / max_req
            penalties += excess * 15
    
    final_score = max(0, score - penalties)
    return final_score

# ì‚¬ìš© ì˜ˆì‹œ
balance_score = calculate_balance_score(nutrient_composition, requirements)  # 85.2
```

## ğŸ”„ ë°ì´í„° ë³€í™˜ ë° ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

### ë‹¨ìœ„ ë³€í™˜
```python
def convert_units(value, from_unit, to_unit):
    """
    ë‹¨ìœ„ ë³€í™˜ í•¨ìˆ˜
    
    Args:
        value: ë³€í™˜í•  ê°’
        from_unit: ì›ë˜ ë‹¨ìœ„
        to_unit: ë³€í™˜í•  ë‹¨ìœ„
    
    Returns:
        ë³€í™˜ëœ ê°’
    """
    # ì—ë„ˆì§€ ë‹¨ìœ„ ë³€í™˜
    energy_conversions = {
        'Mcal_to_MJ': 4.184,
        'MJ_to_Mcal': 0.239,
        'kcal_to_Mcal': 0.001,
        'Mcal_to_kcal': 1000
    }
    
    # ë¬´ê²Œ ë‹¨ìœ„ ë³€í™˜
    weight_conversions = {
        'kg_to_g': 1000,
        'g_to_kg': 0.001,
        'lb_to_kg': 0.4536,
        'kg_to_lb': 2.2046
    }
    
    # ê¸¸ì´ ë‹¨ìœ„ ë³€í™˜
    length_conversions = {
        'cm_to_m': 0.01,
        'm_to_cm': 100,
        'inch_to_cm': 2.54,
        'cm_to_inch': 0.3937
    }
    
    # ëª¨ë“  ë³€í™˜ í…Œì´ë¸” í†µí•©
    all_conversions = {
        **energy_conversions,
        **weight_conversions,
        **length_conversions
    }
    
    conversion_key = f"{from_unit}_to_{to_unit}"
    
    if conversion_key in all_conversions:
        return value * all_conversions[conversion_key]
    else:
        raise ValueError(f"Unsupported unit conversion: {from_unit} to {to_unit}")

# ì‚¬ìš© ì˜ˆì‹œ
energy_mj = convert_units(60.7, 'Mcal', 'MJ')  # 253.9 MJ
weight_g = convert_units(1.5, 'kg', 'g')  # 1500 g
```

### í†µê³„ í•¨ìˆ˜
```python
import numpy as np

def calculate_statistics(data):
    """
    ê¸°ë³¸ í†µê³„ ê³„ì‚°
    
    Args:
        data: ë°ì´í„° ë¦¬ìŠ¤íŠ¸
    
    Returns:
        í†µê³„ ì •ë³´
    """
    if not data:
        return None
    
    stats = {
        'count': len(data),
        'mean': np.mean(data),
        'median': np.median(data),
        'std': np.std(data),
        'min': np.min(data),
        'max': np.max(data),
        'range': np.max(data) - np.min(data)
    }
    
    return stats

def calculate_percentile(data, percentile):
    """
    ë°±ë¶„ìœ„ìˆ˜ ê³„ì‚°
    
    Args:
        data: ë°ì´í„° ë¦¬ìŠ¤íŠ¸
        percentile: ë°±ë¶„ìœ„ìˆ˜ (0-100)
    
    Returns:
        ë°±ë¶„ìœ„ìˆ˜ ê°’
    """
    return np.percentile(data, percentile)

# ì‚¬ìš© ì˜ˆì‹œ
data = [15.2, 16.8, 14.9, 17.1, 16.3, 15.7]
stats = calculate_statistics(data)
# ê²°ê³¼: {'count': 6, 'mean': 16.0, 'median': 16.0, 'std': 0.8, 'min': 14.9, 'max': 17.1, 'range': 2.2}

p95 = calculate_percentile(data, 95)  # 17.0
```

## ğŸ“ˆ ê²€ì¦ ë° ê²€ì¦ í•¨ìˆ˜

### ê³„ì‚° ê²°ê³¼ ê²€ì¦
```python
def validate_calculation_results(energy_req, protein_req, dmi_pred):
    """
    ê³„ì‚° ê²°ê³¼ ê²€ì¦
    
    Args:
        energy_req: ì—ë„ˆì§€ ìš”êµ¬ëŸ‰ (Mcal/day)
        protein_req: ë‹¨ë°±ì§ˆ ìš”êµ¬ëŸ‰ (g/day)
        dmi_pred: ì˜ˆìƒ ê±´ë¬¼ ì„­ì·¨ëŸ‰ (kg/day)
    
    Returns:
        ê²€ì¦ ê²°ê³¼
    """
    validation = {
        'energy_reasonable': 20 <= energy_req <= 100,
        'protein_reasonable': 500 <= protein_req <= 3000,
        'dmi_reasonable': 5 <= dmi_pred <= 30,
        'energy_density_reasonable': 2.0 <= (energy_req / dmi_pred) <= 4.0,
        'protein_density_reasonable': 8.0 <= (protein_req / dmi_pred) <= 25.0
    }
    
    all_valid = all(validation.values())
    
    return {
        'is_valid': all_valid,
        'validation_details': validation,
        'warnings': [k for k, v in validation.items() if not v]
    }

# ì‚¬ìš© ì˜ˆì‹œ
validation = validate_calculation_results(
    energy_req=60.7, protein_req=1413.2, dmi_pred=20.0
)
# ê²°ê³¼: {'is_valid': True, 'validation_details': {...}, 'warnings': []}
```

---

*ì´ ë¬¸ì„œëŠ” CNUCNM ì‹œìŠ¤í…œì˜ ëª¨ë“  ê³„ì‚°ì‹ê³¼ ìˆ˜ì‹ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•œ ê²ƒìœ¼ë¡œ, Pythonìœ¼ë¡œ êµ¬í˜„í•  ë•Œ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ ìˆ˜í•™ì  ê¸°ë°˜ì„ ì œê³µí•©ë‹ˆë‹¤.*
